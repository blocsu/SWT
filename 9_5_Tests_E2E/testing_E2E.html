<!DOCTYPE html>
<html>

<head>
    <title>Пример тестирования с помощью автоматизации браузера (E2E)</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mocha/2.1.0/mocha.css">
</head>

<body>
    <input type="text" name="" id="inp">
    <button id="bt">Нажми</button>
    <script src="./js/out.js"></script>
    <script src="./js/dblttl.js"></script>
    <script>{console.clear();
        async function sha1(x) {
            const msgUint8 = new TextEncoder().encode(x);
            const hashBuffer = await crypto.subtle.digest('SHA-1', msgUint8);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        }
        document.querySelector('#bt')
        .addEventListener('click', async e => {
            const el = document.querySelector('#inp');
            const text = el.value;
            const digestHex = await sha1(text);
            el.value = digestHex;
        });
    }</script>
        
</body>

</html>